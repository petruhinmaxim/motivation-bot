# –ö–∞—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ Motivation Bot

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

Telegram-–±–æ—Ç –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞ "–ñ–∏—Ä–æ–±–æ–π" - –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–µ—Å—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ—Ç–æ–∫–∏

### 1. üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞

```mermaid
graph TD
    A[/start] --> B{–ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π<br/>—á–µ–ª–ª–µ–Ω–¥–∂?}
    B -->|–î–∞| C[–°—Ç–∞—Ä—Ç —Å –∫–Ω–æ–ø–∫–æ–π<br/>"–ö —á–µ–ª–ª–µ–Ω–¥–∂—É"]
    B -->|–ù–µ—Ç| D[–°—Ç–∞—Ä—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏<br/>"–ò–Ω—Ñ–æ" / "–ù–∞—á–∞—Ç—å"]
    D --> E[Begin: –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞]
    E --> F{–ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º?}
    F -->|–°–µ–≥–æ–¥–Ω—è| G[Duration: –í—ã–±–æ—Ä<br/>30/60/90 –¥–Ω–µ–π]
    F -->|–ó–∞–≤—Ç—Ä–∞| H[Tomorrow: –°–æ–æ–±—â–µ–Ω–∏–µ<br/>+ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞]
    F -->|–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫| I[Monday: –°–æ–æ–±—â–µ–Ω–∏–µ<br/>+ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫]
    H --> J[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞–≤—Ç—Ä–∞<br/>–≤ 12:00 –ú–°–ö]
    I --> K[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫<br/>–≤ 12:00 –ú–°–ö]
    J --> G
    K --> G
    G --> L[–°–æ–∑–¥–∞–Ω–∏–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞ –≤ –ë–î]
    L --> M{–£—Å–ø–µ—à–Ω–æ?}
    M -->|–û—à–∏–±–∫–∞: —É–∂–µ –µ—Å—Ç—å| N[–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ<br/>+ –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ]
    M -->|–£—Å–ø–µ—à–Ω–æ| O[Timezone: –í–≤–æ–¥ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞]
    O --> P{–ü–∞—Ä—Å–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω?}
    P -->|–ù–µ—Ç| O
    P -->|–î–∞| Q[Reminder Time: –í–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏]
    Q --> R{–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞?}
    R -->|–ù–µ—Ç| Q
    R -->|–î–∞| S[Challenge Rules: –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª]
    S --> T[Challenge Stats: –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω]
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ –∑–∞—Å—Ç—Ä—è—Ç—å
- ‚ö†Ô∏è **–ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥
- ‚ö†Ô∏è **–ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è —á–µ–ª–ª–µ–Ω–¥–∂–∞ (—É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π)** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –æ—à–∏–±–∫—É, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

---

### 2. üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

```mermaid
graph TD
    A[Challenge Stats] --> B[–ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ"]
    B --> C[Waiting for Photo]
    C --> D{–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª}
    D -->|–¢–µ–∫—Å—Ç| E[–í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ]
    D -->|–§–æ—Ç–æ| F{–ü—Ä–æ–≤–µ—Ä–∫–∏}
    F -->|–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞| G[–û—à–∏–±–∫–∞: –Ω–µ—Ç —á–µ–ª–ª–µ–Ω–¥–∂–∞]
    F -->|–ß–µ–ª–ª–µ–Ω–¥–∂ –Ω–µ active| H[–û—à–∏–±–∫–∞: –∑–∞–≤–µ—Ä—à–µ–Ω]
    F -->|–§–æ—Ç–æ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è| I[–°–æ–æ–±—â–µ–Ω–∏–µ: —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ]
    F -->|–í—Å–µ –û–ö| J[–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ]
    J --> K[–£–≤–µ–ª–∏—á–µ–Ω–∏–µ successfulDays]
    K --> L[–û–±–Ω—É–ª–µ–Ω–∏–µ daysWithoutWorkout]
    L --> M[–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ]
    M --> N[–í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ]
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞** - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–æ—Ç–æ
- ‚ö†Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å** - —Ç–æ–ª—å–∫–æ –æ–±—â–∞—è –æ—à–∏–±–∫–∞, –Ω–µ—Ç –¥–µ—Ç–∞–ª–µ–π
- ‚ö†Ô∏è **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ç–æ –Ω–µ –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É** - –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ
- ‚ö†Ô∏è **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–æ—Ç–æ** - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

---

### 3. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ–ª–ª–µ–Ω–¥–∂–∞

```mermaid
graph TD
    A[Challenge Stats] --> B[Challenge Settings]
    B --> C{–î–µ–π—Å—Ç–≤–∏–µ}
    C -->|–ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å| D[Edit Timezone]
    C -->|–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π| E[Edit Reminder Time]
    C -->|–û—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è| F[–û—Ç–∫–ª—é—á–µ–Ω–∏–µ + –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á]
    C -->|–í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è| E
    D --> G{–ü–∞—Ä—Å–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω?}
    G -->|–ù–µ—Ç| D
    G -->|–î–∞| H[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î]
    H --> B
    E --> I{–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞?}
    I -->|–ù–µ—Ç| E
    I -->|–î–∞| J[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏]
    J --> K[–ü–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π]
    K --> B
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** - –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞
- ‚ö†Ô∏è **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** - –µ—Å–ª–∏ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

---

### 4. üîî –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

```mermaid
graph TD
    A[–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π] --> B[–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Daily Reminder]
    A --> C[–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Midnight Check]
    B --> D[–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è]
    C --> E[–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –ø–æ–ª–Ω–æ—á—å –ø–æ TZ]
    D --> F{–ß–µ–ª–ª–µ–Ω–¥–∂ –∞–∫—Ç–∏–≤–µ–Ω?}
    F -->|–ù–µ—Ç| G[–û—Ç–º–µ–Ω–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π]
    F -->|–î–∞| H{–ï—Å—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏?}
    H -->|–î–∞| I[–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–ø—É—Å–∫–µ]
    H -->|–ù–µ—Ç| J[–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ]
    J --> K[–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏]
    E --> L[–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –∑–∞ –≤—á–µ—Ä–∞]
    L --> M{–§–æ—Ç–æ –±—ã–ª–æ?}
    M -->|–ù–µ—Ç| N[–£–≤–µ–ª–∏—á–µ–Ω–∏–µ daysWithoutWorkout]
    M -->|–î–∞| O[–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º]
    N --> P{daysWithoutWorkout >= 3?}
    P -->|–î–∞| Q[–ü–µ—Ä–µ–≤–æ–¥ –≤ failed]
    P -->|–ù–µ—Ç| R[–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ]
    Q --> S[–û—Ç–º–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫]
    Q --> T[–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏<br/>–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ü–µ–Ω—ã –ø—Ä–æ–≤–∞–ª–∞]
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- üî¥ **–ö–†–ò–¢–ò–ß–ù–û: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ** - –µ—Å–ª–∏ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è, –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã
- ‚ö†Ô∏è **Race condition –º–µ–∂–¥—É midnight check –∏ daily reminder** - –µ—Å–ª–∏ –æ–±–∞ —Å—Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚ö†Ô∏è **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞
- ‚ö†Ô∏è **TTL –≤ Redis –º–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å** - –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫** - –µ—Å–ª–∏ –±–æ—Ç –±—ã–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

### 5. üìä –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```mermaid
graph TD
    A[Challenge Stats] --> B{–î–µ–π—Å—Ç–≤–∏–µ}
    B -->|–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ| C[Waiting for Photo]
    B -->|–ù–∞—Å—Ç—Ä–æ–π–∫–∏| D[Challenge Settings]
    B -->|–ü—Ä–∞–≤–∏–ª–∞| E[Challenge Rules]
    E --> A
    D --> A
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ï—Å–ª–∏ —á–µ–ª–ª–µ–Ω–¥–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω** - —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–µ—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π"
- ‚ö†Ô∏è **–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ** - —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞, –Ω–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 6. ‚ùå –ü—Ä–æ–≤–∞–ª —á–µ–ª–ª–µ–Ω–¥–∂–∞

```mermaid
graph TD
    A[3 –¥–Ω—è –±–µ–∑ —Ñ–æ—Ç–æ] --> B[Midnight Check –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç]
    B --> C[–ü–µ—Ä–µ–≤–æ–¥ –≤ failed]
    C --> D[–û—Ç–º–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫]
    D --> E[–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏]
    E --> F[Challenge Failed Scene]
    F --> G[–ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π"]
    G --> A
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–≤–∞–ª–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏** - –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∞
- ‚ö†Ô∏è **–ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂** - —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ

---

### 7. üìù –û—Ç—á–µ—Ç –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ

```mermaid
graph TD
    A[–ï—Å—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏] --> B[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç]
    B --> C{–°—Ü–µ–Ω–∞ –Ω–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è?}
    C -->|–î–∞| D[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞]
    C -->|–ù–µ—Ç| E[–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ]
    D --> F[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ]
    F --> G[–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ]
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:**
- ‚ö†Ô∏è **–ù–µ—Ç —è–≤–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç** - —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
- ‚ö†Ô∏è **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞** - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
- ‚ö†Ô∏è **–ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã**

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏

### 1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–¥–∞—á–∏ –≤ –ø–∞–º—è—Ç–∏ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –ï—Å—Ç—å `restoreTasks()`, –Ω–æ:
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å race condition –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö
  - TTL –≤ Redis –º–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å
  - –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è
- **–†–∏—Å–∫**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞, –æ—à–∏–±–∫–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–†–∏—Å–∫**: –ó–∞–¥–∞—á–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 3. **Race conditions –≤ scheduler**
- **–ü—Ä–æ–±–ª–µ–º–∞**: `scheduleDailyReminder` –∏ `scheduleMidnightCheck` –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–†–∏—Å–∫**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏–ª–∏ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö

### 4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
  - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏–Ω–≥, –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (-12 –¥–æ +14)
  - –í—Ä–µ–º—è: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç, –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑—É–º–Ω–æ—Å—Ç–∏
  - –§–æ—Ç–æ: –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç–∞
- **–†–∏—Å–∫**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ

### 5. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ `state.service.ts`
- **–†–∏—Å–∫**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ü–µ–Ω–µ

### 6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Telegram API**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ Telegram API (403 Forbidden –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ, 429 Rate Limit)
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –æ–±—â–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- **–†–∏—Å–∫**: –ó–∞–¥–∞—á–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ rate limits

### 7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
- **–ü—Ä–æ–±–ª–µ–º–∞**: 
  - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–æ—Ç–æ)
  - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
  - –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ try-catch —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–†–∏—Å–∫**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 8. **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í `messages.ts:34` –µ—Å—Ç—å TODO –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∑–∞–ø–æ–≤–µ–¥–µ–π
- **–†–∏—Å–∫**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

---

## ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏

### 9. **UX –ø—Ä–æ–±–ª–µ–º—ã**
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
- –ù–µ—Ç —è–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### 10. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ Redis
- –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤ –æ–¥–Ω–æ–º flow

### 11. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. **–£–ª—É—á—à–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Redis
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –ª–æ–≥–∏–∫—É

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Telegram API**
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–∞
   - –û—Ç–º–µ–Ω—è—Ç—å –∑–∞–¥–∞—á–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç–∞–∫–∏–µ —Å–ª—É—á–∞–∏

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ scheduler**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Redis
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)
4. **–£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é**
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–æ—Ç–æ
   - –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

5. **–£–ª—É—á—à–∏—Ç—å UX**
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
   - –Ø–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
   - Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
7. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
   - Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

8. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
   - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—à–∞—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)

---

## üìã –ú–∞—Ç—Ä–∏—Ü–∞ —Ä–∏—Å–∫–æ–≤

| –ü—Ä–æ–±–ª–µ–º–∞ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|-------------|---------|-----------|
| –ü–æ—Ç–µ—Ä—è –∑–∞–¥–∞—á –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ | –í—ã—Å–æ–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | P0 |
| –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | P0 |
| Race conditions –≤ scheduler | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | P0 |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | P1 |
| –ù–µ—Ç–æ—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | P1 |
| –ü–ª–æ—Ö–æ–π UX | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | P2 |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | P2 |

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤ –∫–æ–¥–∞

### 1. `scheduler.service.ts:61-118` - restoreTasks()
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: isRestoring —Ñ–ª–∞–≥ –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—Å–µ—Ö race conditions
// –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis lock
```

### 2. `scheduler.service.ts:684-700` - scheduleDailyReminderInternal()
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
// –†–µ—à–µ–Ω–∏–µ: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å Telegram API –æ—à–∏–±–∫–∏
```

### 3. `middleware.ts:317-396` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç–∞
// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
```

### 4. `state.service.ts:26-86` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
// –†–µ—à–µ–Ω–∏–µ: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã
```

### 5. `challenge.service.ts:214-256` - checkAndIncrementMissedDays()
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –≤–æ–∑–º–æ–∂–Ω—ã race conditions
// –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î
```

### 6. `scheduler.service.ts:684-700` - sendDailyReminder()
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ Telegram API (403, 429)
// –†–µ—à–µ–Ω–∏–µ: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ—Ç–º–µ–Ω—è—Ç—å –∑–∞–¥–∞—á–∏
```

### 7. `middleware.ts:364-395` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
// –†–µ—à–µ–Ω–∏–µ: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º processImage
```

### 8. `image-processor.ts:11-109` - processImage()
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### 9. `state.service.ts:26-86` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
// –†–µ—à–µ–Ω–∏–µ: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º**: 8
- **–°—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º**: 3
- **–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤ –∫–æ–¥–∞**: 9
- **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: 1 (TODO –≤ messages.ts)

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (Roadmap)

### –ù–µ–¥–µ–ª—è 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ Telegram API (403, 429)
2. ‚úÖ –£–ª—É—á—à–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å Redis locks
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ checkAndIncrementMissedDays

### –ù–µ–¥–µ–ª—è 2 (–í–∞–∂–Ω–æ)
4. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–æ—Ç–æ
5. ‚úÖ –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ù–µ–¥–µ–ª—è 3 (–£–ª—É—á—à–µ–Ω–∏—è)
7. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ UX (–∫–Ω–æ–ø–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è)
9. ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å TODO –≤ messages.ts

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2024*
*–í–µ—Ä—Å–∏—è: 1.1*
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã*
